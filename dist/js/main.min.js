"use strict";var modalMenu=fnPlugin.modal("#modal-menu",{animationIn:"_anim-in",animationOut:"_anim-out",animationDuration:710,offset:0,beforeClose:funcModalMenuBeforeClose,afterClose:null,beforeOpen:funcModalMenuBeforeOpen,afterOpen:null,beforeDestruct:null,afterDestruct:null,classNames:["light-menu-modal"]});function inputSearchHandler(e){var t=e.target,n=t.closest(".page-modal-outer");if(0===t.value.trim().length)return t.value="",n.dataset.searchStatus="search-focus",!1;n.dataset.searchStatus="search-live"}function inputSearchBlurHandler(e){var t=e.target,n=t.closest(".page-modal-outer");if(0===t.value.trim().length)return t.value="",n.dataset.searchStatus="",!1;n.dataset.searchStatus="search-live"}function funcModalMenuBeforeOpen(){var e=setTimeout((function(){modalMenu.modalElement.classList.add("modal-custom-animated"),clearTimeout(e)}),20),t=document.querySelector(".page-modal-header .search-input");t.addEventListener("change",inputSearchHandler),t.addEventListener("input",inputSearchHandler),t.addEventListener("focus",inputSearchHandler),t.addEventListener("blur",inputSearchBlurHandler)}function funcModalMenuBeforeClose(){var e=document.querySelector(".page-modal-header .search-input");e.removeEventListener("change",inputSearchHandler),e.removeEventListener("input",inputSearchHandler),e.removeEventListener("focus",inputSearchHandler),e.removeEventListener("blur",inputSearchBlurHandler),e.value="",e.closest(".page-modal-outer").removeAttribute("data-search-status"),modalMenu.modalElement.classList.remove("modal-custom-animated")}function funcModalCalcBeforeClose(){modalCalc.modalElement.classList.remove("modal-custom-animated")}function funcModalCalcBeforeOpen(){var e=setTimeout((function(){modalCalc.modalElement.classList.add("modal-custom-animated"),clearTimeout(e)}),20)}var modalCalc=fnPlugin.modal("#modal-calc",{animationIn:"_anim-in",animationOut:"_anim-out",animationDuration:710,offset:0,beforeClose:funcModalCalcBeforeClose,afterClose:null,beforeOpen:funcModalCalcBeforeOpen,afterOpen:null,beforeDestruct:null,afterDestruct:null,classNames:["light-calc-modal"]}),modalComment=fnPlugin.modal("#modal-comment",{animationIn:"_anim-in",animationOut:"_anim-out",animationDuration:710,offset:0,beforeClose:funcModalCommentBeforeClose,afterClose:null,beforeOpen:funcModalCommentBeforeOpen,afterOpen:null,beforeDestruct:null,afterDestruct:null,classNames:["light-comment-modal"]});function funcModalCommentBeforeClose(){modalComment.modalElement.classList.remove("modal-custom-animated")}function funcModalCommentBeforeOpen(){var e=setTimeout((function(){modalComment.modalElement.classList.add("modal-custom-animated"),clearTimeout(e)}),20)}var modalSuccess=fnPlugin.modal("#modal-success",{animationIn:"_anim-in",animationOut:"_anim-out",animationDuration:710,offset:0,beforeClose:funcModalSuccessBeforeClose,afterClose:null,beforeOpen:funcModalSuccessBeforeOpen,afterOpen:null,beforeDestruct:null,afterDestruct:null,classNames:["light-success-modal"]});function funcModalSuccessBeforeClose(){modalSuccess.modalElement.classList.remove("modal-custom-animated")}function funcModalSuccessBeforeOpen(){var e=setTimeout((function(){modalSuccess.modalElement.classList.add("modal-custom-animated"),clearTimeout(e)}),20)}function switchModal(e){switch(e){case"open-menu":modalMenu.open();break;case"open-calc":modalCalc.open();break;case"open-comment":modalComment.open()}}function fixVhBug(){var e,t,n=document.getElementById("cssVh");null===n?(e=document.createElement("style")).id="cssVh":e=n;var o=(t=window.innerHeight)/100;e.innerText=":root {--vh: ".concat(o,"px; --vh100: ").concat(t,"px"),document.querySelector("head").appendChild(e)}document.addEventListener("click",(function(e){var t=e.target.closest(".btn-open-modal");if(null===t)return!1;var n=t.dataset.action;if(void 0===n||""===n)return!1;var o=document.querySelectorAll(".light-modal-open");if(o.length){o.forEach((function(e){e.modal.close()}));var a=setTimeout((function(){switchModal(n),clearTimeout(a)}),720)}else switchModal(n)}));var numToStr=function(e){return e<=9&&0!==e?"0".concat(e):e},doPageMainSlider=function(e){var t=$(e);if(0===t.length)return!1;var n={dots:!0,arrows:!0,infinite:!0,speed:1200,slidesToShow:1,slidesToScroll:1,fade:!0,autoplaySpeed:4e3,pauseOnHover:!1,pauseOnFocus:!1,lazyLoad:"ondemand",responsive:[{breakpoint:501,settings:{arrows:!1,dots:!0}}]},o={dots:!1,arrows:!1,infinite:!0,speed:1200,slidesToShow:1,slidesToScroll:1,fade:!0,autoplay:!1,pauseOnHover:!1,pauseOnFocus:!1,lazyLoad:"ondemand"};t.each((function(e,t){var a=$(t),i=a.closest(".slider-wrap"),s=i.find(".btn-slider.prev"),l=i.find(".btn-slider.next"),r=a.find(".slide-item").length,c=i.find(".slider-current-page"),d=i.find(".slider-all-page"),u=i.find(".main-slider-images").eq(0);u.slick(o);var m=Object.assign(n,{prevArrow:s,nextArrow:l,asNavFor:u});c.html(numToStr(1)),d.html(numToStr(r)),a.slick(m),a.on("beforeChange",(function(e,t,n,o){c.html(numToStr(o+1))}))}))},doNewsMainSlider=function(){var e=$(".news-main-slider");if(0===e.length)return!1;var t={dots:!1,arrows:!0,infinite:!0,speed:600,slidesToShow:1,slidesToScroll:1,fade:!0,autoplay:!0,autoplaySpeed:5e3,pauseOnHover:!1,pauseOnFocus:!1,lazyLoad:"ondemand"};e.each((function(e,n){var o=$(n),a=o.closest(".slider-wrap"),i=a.find(".btn-slider.prev"),s=a.find(".btn-slider.next"),l=o.find(".slide-item").length,r=a.find(".slider-counter-current"),c=a.find(".slider-counter-all"),d=a.find(".main-slider-images").find(".main-slider-images-item");d.eq(0).addClass("slide-active");var u=Object.assign(t,{prevArrow:i,nextArrow:s});r.html(1),c.html(l),o.slick(u),o.on("beforeChange",(function(e,t,n,o){d.removeClass("slide-active"),d.eq(o).addClass("slide-active"),r.html(o+1)}))}))},doSideBlockSlider=function(){var e=$(".side-block-slider");if(0===e.length)return!1;var t={dots:!1,arrows:!0,infinite:!0,speed:450,slidesToShow:1,slidesToScroll:1,fade:!0,autoplay:!1,autoplaySpeed:4e3,pauseOnHover:!0,pauseOnFocus:!0,lazyLoad:"ondemand"};e.each((function(e,n){var o=$(n),a=o.closest(".slider-wrap"),i=a.find(".btn-slider.prev"),s=a.find(".btn-slider.next"),l=Object.assign(t,{prevArrow:i,nextArrow:s});o.slick(l)}))},doNewsColumnsSlider=function(){var e=$(".news-columns-slider");if(0===e.length)return!1;var t={dots:!1,arrows:!0,infinite:!0,speed:450,slidesToShow:1,slidesToScroll:1,fade:!0,autoplay:!1,autoplaySpeed:4e3,pauseOnHover:!0,pauseOnFocus:!0,lazyLoad:"ondemand"};e.each((function(e,n){var o=$(n),a=o.closest(".slider-wrap"),i=a.find(".btn-slider.prev"),s=a.find(".btn-slider.next"),l=Object.assign(t,{prevArrow:i,nextArrow:s});o.slick(l)}))},doProjectSizesSlider=function(){var e=$(".project-sizes-slider");if(0===e.length)return!1;var t={dots:!1,arrows:!0,infinite:!0,speed:300,slidesToShow:1,slidesToScroll:1,fade:!1,autoplay:!1,pauseOnHover:!0,pauseOnFocus:!0,lazyLoad:"ondemand",variableWidth:!0,focusOnSelect:!0};e.each((function(e,n){var o=$(n),a=o.closest(".slider-wrap"),i=a.find(".btn-slider.prev"),s=a.find(".btn-slider.next"),l=a.find(".project-sizes-preview-box").eq(0),r=Object.assign(t,{prevArrow:i,nextArrow:s});o.slick(r),o.on("beforeChange",(function(e,t,n,o){l.find(".project-sizes-preview-item").removeClass("active").eq(o).addClass("active")}))}))},doAccordionApp=function(){var e=$(".app-accordion");e.length&&e.each((function(e,t){var n=$(t),o=n.find(".app-accordion-item");n.on("click",".app-accordion-head",(function(e){var t=$(this).closest(".app-accordion-item");o.not(t).removeClass("accordion-section-active").find(".app-accordion-body").stop().slideUp(600),t.hasClass("accordion-section-active")?(t.removeClass("accordion-section-active"),t.find(".app-accordion-body").stop().slideUp(600)):(t.addClass("accordion-section-active"),t.find(".app-accordion-body").stop().slideDown(600))}))}))},doTechSlider=function(){$(".tech-slider").each((function(e,t){var n=$(t),o=n.find(".tech-slider-tab");o.on("click"," .tech-section-head",(function(e){var t=$(this).closest(".tech-slider-tab");$(window).width()>781?function(e,t,n){if(n.hasClass("tech-animated"))return!1;if(e.hasClass("tech-slider-tab-active"))return!1;t.removeClass("tech-slider-tab-active"),e.addClass("tech-slider-tab-active");var o=n.find(".tech-slider-media .tech-slider-media-cover"),a=o.width(),i=n.find(".tech-slider-media  .tech-section-title"),s=n.find(".tech-slider-media  .tech-section-description"),l=e.find(".tech-slider-tab-img-container").html(),r=e.find(".tech-slider-tab-title").html(),c=e.find(".tech-slider-tab-description").html(),d='\n                <div class="tech-section-cover-frame new">\n                    <div class="tech-section-cover-frame-wrap " style="width:'.concat(a,'px">\n                      ').concat(l,"\n                    </div>\n                </div>\n            "),u='\n                <div class="tech-section-title-content new">\n                    '.concat(r,"\n                </div>\n            "),m='\n                <div class="tech-section-description-content new u-text-t2">\n                    '.concat(c,"\n                </div>\n            ");o.append(d),i.append(u),s.append(m);var f=setTimeout((function(){n.addClass("tech-animated").addClass("tech-animated-start");var e=setTimeout((function(){n.removeClass("tech-animated-start").addClass("tech-animated-end");var t=setTimeout((function(){n.find("\n                    .tech-section-title-content:not(.new), \n                    .tech-section-description-content:not(.new), \n                    .tech-section-cover-frame:not(.new)").remove(),n.find("\n                    .tech-section-title-content, \n                    .tech-section-description-content,  \n                    .tech-section-cover-frame").removeClass("new"),n.removeClass("tech-animated-end").removeClass("tech-animated"),clearTimeout(f),clearTimeout(e),clearTimeout(t)}),450)}),450)}),20)}(t,o,n):function(e,t){t.not(e).removeClass("accordion-active").find(".tech-section-body").stop().slideUp(200),e.hasClass("accordion-active")?e.removeClass("accordion-active").find(".tech-section-body").stop().slideUp(200):e.addClass("accordion-active").find(".tech-section-body").stop().slideDown(200)}(t,o)}))}))},doSliderTrust=function(){var e=$(".trust-slider"),t={dots:!1,arrows:!0,infinite:!0,speed:300,slidesToShow:4,slidesToScroll:1,fade:!1,autoplay:!1,autoplaySpeed:5e3,pauseOnHover:!1,lazyLoad:"ondemand",responsive:[{breakpoint:992,settings:{slidesToShow:3}},{breakpoint:640,settings:{slidesToShow:2}},{breakpoint:480,settings:{slidesToShow:1}}]};e.each((function(e,n){var o=$(n),a=o.closest(".slider-wrap"),i=a.find(".btn-slider.prev"),s=a.find(".btn-slider.next"),l=Object.assign(t,{prevArrow:i,nextArrow:s});o.slick(l)}))},doUserSelect=function(e){var t=$(e);t.length&&t.select2({minimumResultsForSearch:2})},doElementFullHeight=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if($(window).width()<t)return!1;var n=$(e);if(n.length>0){var o=$(window).height();n.each((function(e,t){$(t).height(o)}))}};$(document).on("click",".btn-open-menu",(function(e){$("html").addClass("modal-menu-active").addClass("stop-scroll")})),$(document).on("click",".btn-open-search",(function(e){$("html").addClass("modal-search-active").addClass("stop-scroll")})),$(document).on("click",".btn-open-modal-form",(function(e){$("html").addClass("modal-form-active").addClass("stop-scroll")})),$(document).on("click",".btn-modal-outer-close",(function(e){$("html").removeClass("modal-menu-active").removeClass("modal-search-active").removeClass("modal-form-active").removeClass("stop-scroll")}));var doTabs=function(){var e=$(".tab-wrap");e.length&&e.each((function(e,t){var n=$(t);n.on("click",".btn-tab",(function(){var e=$(this),t=e.attr("data-tab-target"),o=n.find(t);if(o&&o.length){n.find(".tab-body-item").removeClass("tab-active"),o.addClass("tab-active"),n.find(".btn-tab").removeClass("tab-active"),e.addClass("tab-active");var a=n.find(".slick-slider");a.length&&a.each((function(e){setTimeout((function(){a.eq(e).slick("setPosition")}),30)}));var i=n.find(".video-box");i.length&&i.each((function(e){stopVideoBox($(this))}))}}))}))},doAccordionMenu=function(){var e=$(".main-menu-list");if(0===e.length)return 0;var t=e.find(".main-menu-item");e.on("click",".main-menu-item-head",(function(e){if($(window).width()>575)return 0;e.preventDefault();var n=$(this).closest(".main-menu-item");t.not(n).stop().removeClass("menu-accordion-active").find(".main-menu-item-body").stop().slideUp(200),n.hasClass("menu-accordion-active")?n.removeClass("menu-accordion-active").find(".main-menu-item-body").stop().slideUp(200):n.addClass("menu-accordion-active").find(".main-menu-item-body").stop().slideDown(200)}))};function initMaskPhoneInputs(){var e=$('input[type="tel"]');e.length&&(e.mask("+7 000 000 00 00"),e.on("focus",(function(){var e=$(this);0===e.val().length&&e.val("+7 ")})),e.on("blur",(function(){var e=$(this);16!==e.val().length&&e.val("")})))}function isValid(e){var t=e.find(".validated-control"),n=[];return t.each((function(){var e=$(this);0!==e.val().length&&e.val().replace(/\s+/g,"")&&("checkbox"!==e.attr("type")||e.prop("checked"))?"tel"===e.attr("type")&&16!==e.val().length?(e.addClass("invalid"),n.push("0")):e.removeClass("invalid"):(e.addClass("invalid"),n.push("0"))})),0===n.length}function toggleThemeHeader(){var e=$(".header-block").eq(0),t=$(".main-first-block").eq(0);if(0!==e.length&&0!==t){var n=t.height();$(window).scrollTop()>n?e.addClass("dark"):e.removeClass("dark")}}$(window).on("scroll",(function(){toggleThemeHeader()}));var doLightGallery=function(){var e=$(".lg-video-item");e.length&&e.lightGallery({selector:"this"})};function fixProjectsTileBox(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(e=null!==t?t.find(".projects-tile-box"):$(".projects-tile-box")).length&&e.each((function(){var e=$(this).find(".projects-tile-unit-header"),t=[];e.each((function(){var e=$(this);t.push(e.height())}));var n=Math.max.apply(Math,t);e.css("min-height",n+"px")}))}function doFixProjectsTileBox(){fixProjectsTileBox(),$(".project-tab-unit").length&&$(document).on("click",".project-tab-unit",(function(e){var t=$(this).closest(".tab-wrap"),n=setTimeout((function(){fixProjectsTileBox(t.find(".tab-body-item.tab-active")),clearTimeout(n)}),40)}))}function stopVideoBox(e){e.find(".video-frame-container").html(""),e.removeClass("video-active")}function doVideoBox(){$(".video-box").length&&$(document).on("click",".video-box-cover",(function(e){var t=$(this),n=t.attr("data-video"),o=t.closest(".video-box"),a=o.find(".video-frame-container");o.addClass("video-active");var i='\n    <iframe width="560" height="315" src="'.concat(n,'?autoplay=1"  frameborder="0" allow="accelerometer; autoplay;"" allowfullscreen></iframe>\n    ');a.html(i)}))}function scrollVisible(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{offsetTop:0,offsetBottom:0,k:!1};if(0===e.length)return!1;var n=$(window).scrollTop(),o=$(window).height(),a=e.offset().top,i=e.outerHeight(),s=a,l=i+a,r=n,c=n+o,d=o*t.offsetTop,u=o*t.offsetBottom,m={visible:!1,k:0};if(r+d<l&&c-u>s&&(m.visible=!0),!1===t.k)return m;var f=s-o+u,v=l-d,h=(v=v>=0?v:l)-(f=f>=0?f:u),p=n-f,g=p/(h/100);return g=(g=g<0?0:g)>=100?100:g,m.k=g.toFixed(2),m}$(document).ready((function(){fixVhBug(),doFixProjectsTileBox(),doPageMainSlider(".main-page-slider"),doAccordionApp(),doTechSlider(),doSliderTrust(),doSideBlockSlider(),doNewsColumnsSlider(),doNewsMainSlider(),doTabs(),doAccordionMenu(),doLightGallery(),doUserSelect(".custom-select"),initMaskPhoneInputs(),doVideoBox(),doProjectSizesSlider()})),$(window).on("resize",(function(){fixVhBug()})),$(document).ready((function(){$(document).on("focus change","input, textarea",(function(){$(this).removeClass("invalid")})),$(document).on("submit",".send-form",(function(e){e.preventDefault();var t=$(this);if(isValid(t)&&t.closest(".light-modal-outer")){t.trigger("reset");var n=document.querySelectorAll(".light-modal-open");if(n.length){n.forEach((function(e){e.modal.close()}));var o=setTimeout((function(){modalSuccess.open(),clearTimeout(o)}),720)}else modalSuccess.open()}}))}));